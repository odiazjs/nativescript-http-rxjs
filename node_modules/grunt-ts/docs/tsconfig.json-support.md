# Proposal for tsconfig.json Support

Grunt-ts supports using a tsconfig.json file.  Here are some example Gruntfile initConfig sections:

Use all settings from the specified `tsconfig.json` file including `files` and `compilerOptions` (path to the `tsconfig.json` file is relative to `Gruntfile.js`).  This will use filesGlob, if present, but not update it if a different glob is optionally passed to grunt-ts.  It is not required to pass `src` or `files` to grunt-ts if `tsconfig` is passed.
```js
grunt.initConfig({
  ts: {
    default: {
      tsconfig: true   // Value must be a string referencing a file path such as "./somefolder/tsconfig.json", OR a truthy value to use the 'tsconfig.json' in same folder as Gruntfile.js
    }
  }
});
```

If more control is desired, you may pass tsconfig as an object:

```js
grunt.initConfig({
  ts: {
    default: {
      tsconfig: {
        tsconfig: './SomeOtherFolder/tsconfig.json',  // optional - if absent will default to 'tsconfig.json' in same folder as Gruntfile.js.  If a folder is passed, will use tsconfig.json in that folder.
        ignoreFiles: false, // optional - default is false.  If true, will not inlcude files in `files` array from `tsconfig.json` in the compilation context.
        ignoreSettings: false, // optional - default is false.  If true, will ignore `compilerOptions` from `tsconfig.json` (instead using grunt-ts settings from Gruntfile.js)
        overwriteFilesGlob: false, // optional - default is false.  If true, will overwrite the contents of the `filesGlob` array with the contents of the `src` glob from grunt-ts.
        updateFiles: true, // optional - default is true.  Will maintain the `files` array based on the files found in `filesGlob`. (Note - If there is a `filesGlob` element, grunt-ts will only add/remove files that match it in the `files` array - not files found in any glob from `src`.  This is relevant if `overwriteFilesGlob` is false (the default).  )
        passThrough: false // optional - default is false.  If passThrough is set, grunt-ts will run TypeScript (tsc) with the specified tsconfig passing the `--project` option only (and anything in additionalFlags).  This provides support for custom compilers with custom implementations of tsconfig.json.
      }
    }
  }
});
```

### Important notes:
  * Globs in filesGlob in tsconfig.json are relative to the tsconfig.json NOT the Gruntfile.js.
  * `tsconfig` has a restriction when used with `files` in the Grunt task configuration: `overwriteFilesGlob` is NOT supported if `files` has more than one element.  This will abort compilation.

## General "Happy Path" processes providing support for using an editor like Notepad++ or Sublime that does NOT maintain the tsconfig.json

### Basic tsconfig: true

```js
grunt.initConfig({
  ts: {
    default : {
      tsconfig: true
    }
  }
);
```

  * Grunt-ts will open and parse the `./tsconfig.json`.  If the tsconfig.json file does not exist it will be created with the defaults and a filesGlob that finds all .ts files excluding node_modules.  If there is a parse error, compilation will be aborted with an error.
  * Since in this scenario `updateFiles` is true (via default), if a `filesGlob` element is present in `tsconfig.json`, Grunt-ts will attempt to match all files with it and then update `files` in `tsconfig.json` with the result and save it.
  * The files in the (updated) `files` array will be added to the grunt-ts compilation context.
  * The options in compilerOptions will be used.

### Basic "passThrough"

If passThrough is set, grunt-ts will run TypeScript (tsc) with the specified tsconfig passing the `--project` option only (and anything in additionalFlags).  This provides support for custom compilers with custom implementations of tsconfig.json.

```js
  grunt.initConfig({
    ts: {
      default : {
        tsconfig: {
          passThrough: true
        }
      }
    }
  );
```

  * Grunt-ts will open and parse the `./tsconfig.json`.  If the tsconfig.json file does not exist it will be created with the defaults and a filesGlob that finds all .ts files excluding node_modules.  If there is a parse error, compilation will be aborted with an error.
  * Since in this scenario `updateFiles` is true (via default), if a `filesGlob` element is present in `tsconfig.json`, Grunt-ts will attempt to match all files with it and then update `files` in `tsconfig.json` with the result and save it.
  * Grunt-ts will run `tsc --project .`

### Scenario: tsconfig.json is set up for "dev", grunt-ts "release" task is set up for production.

```js
  grunt.initConfig({
    ts: {
      release : {
        options: {
          removeComments: true
        },
        tsconfig: true
      },
      dev : {
        tsconfig: true
      }
    }
  );
```

  * Grunt-ts will open and parse the `./tsconfig.json`.  If the tsconfig.json file does not exist it will be created with the defaults and a filesGlob that finds all .ts files excluding node_modules.  If there is a parse error, compilation will be aborted with an error.
  * Since in this scenario `updateFiles` is true (via default), if a `filesGlob` element is present in `tsconfig.json`, Grunt-ts will attempt to match all files with it and then update `files` in `tsconfig.json` with the result and save it.
  * Let's assume that `removeComments` is false in tsconfig.json.  When the `release` target is run, the comments will be removed.  When the `dev` target is run, the comments will be preserved.


## Open questions

Should this work with `vs`?  I feel like the answer should be "no", but I am willing to be convinced otherwise.  Perhaps if `vs` is specified with `tsconfig`, anything in `tsconfig.json` should override the settings from Visual Studio (mainly because I suspect that Visual Studio will move to tsconfig.json eventually).
